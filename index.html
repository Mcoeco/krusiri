<!DOCTYPE html>
<html lang="th">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Smart Parcel Locker ‚Äì Telegram Notification System</title>

  <style>
    :root{
      --bg:#0b0e14;
      --surface:#111623;
      --line:#1e2440;
      --text:#f2f4fa;
      --muted:#a8b0c9;
      --accent:#4f8cff;
      --radius:18px;
    }

    *{box-sizing:border-box;margin:0;padding:0;font-family: system-ui, -apple-system, Segoe UI, sans-serif;}
    body{background:var(--bg);color:var(--text);}

    header{
      position:sticky; top:0; z-index:100;
      background:rgba(11,14,20,.95);
      backdrop-filter: blur(10px);
      border-bottom:1px solid var(--line);
    }

    .nav{
      max-width:1200px;
      margin:auto;
      padding:16px 20px;
      display:flex;
      justify-content:space-between;
      align-items:center;
    }

    .nav .brand{font-weight:600; letter-spacing:.4px; font-size:15px;}
    .nav-links{display:flex; gap:6px; flex-wrap:wrap;}
    .nav a{color:var(--muted); text-decoration:none; padding:6px 12px; font-size:14px; border-radius:8px; transition:.2s;}
    .nav a:hover{color:var(--text); background:rgba(79,140,255,.1);}

    main{max-width:1200px; margin:auto; padding:60px 18px 120px;}

    .hero{
      display:grid;
      grid-template-columns: 1.2fr .8fr;
      gap:40px;
      align-items:center;
      margin-top:30px;
    }

    .hero h1{font-size:clamp(30px,5vw,48px); line-height:1.15; margin-bottom:16px;}
    .hero p{color:var(--muted); max-width:600px; font-size:16px; line-height:1.9;}

    .media{
      background:var(--surface);
      border:1px solid var(--line);
      border-radius:var(--radius);
      padding:16px;
      display:flex;
      justify-content:center;
    }

    video{
      width:100%;
      max-width:340px;
      aspect-ratio:9/16;
      border-radius:12px;
      background:black;
    }

    section{margin-top:120px;}

    .section-title{
      font-size:22px;
      margin-bottom:28px;
      letter-spacing:.3px;
      display:flex;
      align-items:center;
      gap:12px;
    }

    .section-title::before{
      content:"";
      width:5px;
      height:24px;
      background:var(--accent);
      border-radius:3px;
    }

    .grid{
      display:grid;
      grid-template-columns:repeat(auto-fit, minmax(230px,1fr));
      gap:22px;
    }

    .card{
      background:var(--surface);
      border:1px solid var(--line);
      border-radius:var(--radius);
      padding:22px;
      transition:.25s ease;
    }

    .card:hover{transform: translateY(-6px); border-color:#2a3470;}
    .card h3{font-size:16px; margin-bottom:8px;}
    .card p{font-size:14.5px; color:var(--muted); line-height:1.8;}

    pre{
      background:#0e1324;
      border:1px solid var(--line);
      border-radius:14px;
      padding:20px;
      overflow:auto;
      font-size:13.5px;
      line-height:1.7;
      color:#cdd6f4;
    }

    /* Generator Styles */
    .form-grid{
      display:grid;
      grid-template-columns:repeat(auto-fit,minmax(240px,1fr));
      gap:18px;
      margin-bottom:24px;
    }

    .form-group{
      display:flex;
      flex-direction:column;
      gap:6px;
    }

    label{
      font-size:13px;
      color:var(--muted);
      font-weight:500;
    }

    input{
      width:100%;
      padding:11px 14px;
      border-radius:10px;
      background:#0e1320;
      border:1px solid var(--line);
      color:#fff;
      font-size:14px;
      transition:.2s;
    }

    input:focus{
      outline:none;
      border-color:var(--accent);
      background:#0f1528;
    }

    .btn{
      background:linear-gradient(135deg, #4f8cff 0%, #3d6fd9 100%);
      border:none;
      color:#fff;
      padding:12px 24px;
      border-radius:10px;
      cursor:pointer;
      font-weight:500;
      font-size:14px;
      transition:.3s;
      display:inline-flex;
      align-items:center;
      gap:8px;
    }

    .btn:hover{
      transform: translateY(-2px);
      box-shadow: 0 6px 20px rgba(79,140,255,.3);
    }

    .btn:active{transform: translateY(0);}

    .btn-secondary{
      background:rgba(79,140,255,.15);
      border:1px solid #2a3470;
      color:#9bb8ff;
    }

    .btn-secondary:hover{
      background:rgba(79,140,255,.25);
      color:#fff;
      box-shadow: 0 4px 15px rgba(79,140,255,.2);
    }

    .actions{
      display:flex;
      gap:12px;
      flex-wrap:wrap;
      margin-top:18px;
    }

    .code-output{
      margin-top:24px;
      position:relative;
    }

    .copy-indicator{
      position:absolute;
      top:16px;
      right:16px;
      background:rgba(79,255,140,.9);
      color:#000;
      padding:6px 12px;
      border-radius:6px;
      font-size:12px;
      font-weight:600;
      opacity:0;
      transition:.3s;
      pointer-events:none;
    }

    .copy-indicator.show{opacity:1;}

    footer{
      margin-top:140px;
      padding:50px 20px;
      text-align:center;
      color:var(--muted);
      border-top:1px solid var(--line);
      font-size:14px;
    }

    @media(max-width:900px){
      .hero{grid-template-columns:1fr;}
      video{max-width:280px;}
      .nav{flex-direction:column; align-items:flex-start; gap:10px;}
      .nav-links{gap:4px;}
      .form-grid{grid-template-columns:1fr;}
    }
  </style>
</head>
<body>

<header>
  <div class="nav">
    <div class="brand">üîê Smart Parcel Locker</div>
    <div class="nav-links">
      <a href="#about">About</a>
      <a href="#demo">Demo</a>
      <a href="#tech">Technology</a>
      <a href="#config">Config</a>
      <a href="#generator">Generator</a>
      <a href="#flow">Workflow</a>
    </div>
  </div>
</header>

<main>

  <section id="about" class="hero">
    <div>
      <h1>Smart Parcel Locker with Telegram Notification</h1>
      <p>
        ‡πÇ‡∏Ñ‡∏£‡∏á‡∏á‡∏≤‡∏ô‡∏ô‡∏µ‡πâ‡πÄ‡∏õ‡πá‡∏ô‡∏£‡∏∞‡∏ö‡∏ö‡∏ï‡∏π‡πâ‡∏£‡∏±‡∏ö‡∏û‡∏±‡∏™‡∏î‡∏∏‡∏≠‡∏±‡∏à‡∏â‡∏£‡∏¥‡∏¢‡∏∞‡∏ó‡∏µ‡πà‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡∏ï‡∏£‡∏ß‡∏à‡∏à‡∏±‡∏ö‡∏û‡∏±‡∏™‡∏î‡∏∏‡πÑ‡∏î‡πâ‡∏≠‡∏±‡∏ï‡πÇ‡∏ô‡∏°‡∏±‡∏ï‡∏¥  
        ‡πÅ‡∏•‡∏∞‡πÅ‡∏à‡πâ‡∏á‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô‡πÑ‡∏õ‡∏¢‡∏±‡∏á‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô‡∏ú‡πà‡∏≤‡∏ô Telegram ‡πÅ‡∏ö‡∏ö‡πÄ‡∏£‡∏µ‡∏¢‡∏•‡πÑ‡∏ó‡∏°‡πå  
        ‡∏ä‡πà‡∏ß‡∏¢‡∏•‡∏î‡∏õ‡∏±‡∏ç‡∏´‡∏≤‡∏û‡∏±‡∏™‡∏î‡∏∏‡∏ï‡∏Å‡∏Ñ‡πâ‡∏≤‡∏á ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏Ñ‡∏ß‡∏≤‡∏°‡∏™‡∏∞‡∏î‡∏ß‡∏Å ‡πÅ‡∏•‡∏∞‡∏Ñ‡∏ß‡∏≤‡∏°‡∏õ‡∏•‡∏≠‡∏î‡∏†‡∏±‡∏¢‡πÉ‡∏ô‡∏Å‡∏≤‡∏£‡∏£‡∏±‡∏ö‡∏û‡∏±‡∏™‡∏î‡∏∏
      </p>
    </div>

    <div class="media" id="demo">
      <iframe width="560" height="315" src="https://www.youtube.com/embed/8VbhOzaeOGo" frameborder="0" allowfullscreen></iframe>
    </div>
  </section>

  <section id="tech">
    <div class="section-title">Technology & Devices</div>
    <div class="grid">
      <div class="card">
        <h3>NodeMCU ESP8266</h3>
        <p>‡∏ö‡∏≠‡∏£‡πå‡∏î‡∏Ñ‡∏ß‡∏ö‡∏Ñ‡∏∏‡∏°‡∏´‡∏•‡∏±‡∏Å ‡∏ó‡∏≥‡∏´‡∏ô‡πâ‡∏≤‡∏ó‡∏µ‡πà‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡∏ï‡πà‡∏≠ Wi-Fi ‡πÅ‡∏•‡∏∞‡∏™‡πà‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÑ‡∏õ‡∏¢‡∏±‡∏á Telegram Bot</p>
      </div>
      <div class="card">
        <h3>Infrared Sensor</h3>
        <p>‡∏ï‡∏£‡∏ß‡∏à‡∏à‡∏±‡∏ö‡∏Å‡∏≤‡∏£‡∏°‡∏µ‡∏≠‡∏¢‡∏π‡πà‡∏Ç‡∏≠‡∏á‡∏û‡∏±‡∏™‡∏î‡∏∏‡∏†‡∏≤‡∏¢‡πÉ‡∏ô‡∏ä‡πà‡∏≠‡∏á‡∏£‡∏±‡∏ö‡∏û‡∏±‡∏™‡∏î‡∏∏</p>
      </div>
      <div class="card">
        <h3>Telegram Bot API</h3>
        <p>‡πÉ‡∏ä‡πâ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏™‡πà‡∏á‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡πÅ‡∏à‡πâ‡∏á‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô‡πÑ‡∏õ‡∏¢‡∏±‡∏á‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô‡πÅ‡∏ö‡∏ö‡πÄ‡∏£‡∏µ‡∏¢‡∏•‡πÑ‡∏ó‡∏°‡πå</p>
      </div>
      <div class="card">
        <h3>LED Indicator</h3>
        <p>‡πÅ‡∏™‡∏î‡∏á‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞‡∏ß‡πà‡∏≤‡∏°‡∏µ‡∏û‡∏±‡∏™‡∏î‡∏∏‡∏≠‡∏¢‡∏π‡πà‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏û‡∏±‡∏™‡∏î‡∏∏‡πÉ‡∏ô‡∏ï‡∏π‡πâ</p>
      </div>
    </div>
  </section>

  <section id="config">
    <div class="section-title">System Configuration</div>

    <p style="color:var(--muted); max-width:700px; margin-bottom:18px; line-height:1.8;">
      ‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡∏Ñ‡πà‡∏≤ WiFi, ‡∏£‡∏´‡∏±‡∏™‡∏ú‡πà‡∏≤‡∏ô, Token ‡∏Ç‡∏≠‡∏á Telegram Bot  
      ‡πÅ‡∏•‡∏∞ Chat ID ‡πÑ‡∏î‡πâ‡∏à‡∏≤‡∏Å‡∏™‡πà‡∏ß‡∏ô CONFIG ‡πÉ‡∏ô‡πÇ‡∏Ñ‡πâ‡∏î ESP8266 ‡πÇ‡∏î‡∏¢‡πÑ‡∏°‡πà‡∏Å‡∏£‡∏∞‡∏ó‡∏ö‡πÇ‡∏Ñ‡∏£‡∏á‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏´‡∏•‡∏±‡∏Å‡∏Ç‡∏≠‡∏á‡∏£‡∏∞‡∏ö‡∏ö
    </p>

    <pre>/* ================== CONFIG ================== */
#define WIFI_SSID     "‡∏ä‡∏∑‡πà‡∏≠‡πÑ‡∏ß‡πÑ‡∏ü‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì"
#define WIFI_PASSWORD "‡∏£‡∏´‡∏±‡∏™‡πÑ‡∏ß‡πÑ‡∏ü‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì"

#define BOT_TOKEN "‡πÉ‡∏™‡πà Token ‡∏à‡∏≤‡∏Å BotFather"
#define CHAT_ID   "‡πÉ‡∏™‡πà Chat ID ‡∏Ç‡∏≠‡∏á‡∏ú‡∏π‡πâ‡∏£‡∏±‡∏ö‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°"

/* ================== PIN SETUP ================== */
#define SENSOR_PIN D5
#define LED_RED    D6
#define LED_GREEN  D7</pre>

    <div class="grid" style="margin-top:26px;">
      <div class="card">
        <h3>WIFI_SSID</h3>
        <p>‡∏ä‡∏∑‡πà‡∏≠‡πÄ‡∏Ñ‡∏£‡∏∑‡∏≠‡∏Ç‡πà‡∏≤‡∏¢ Wi-Fi ‡∏ó‡∏µ‡πà ESP8266 ‡∏à‡∏∞‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡∏ï‡πà‡∏≠</p>
      </div>
      <div class="card">
        <h3>WIFI_PASSWORD</h3>
        <p>‡∏£‡∏´‡∏±‡∏™‡∏ú‡πà‡∏≤‡∏ô‡∏Ç‡∏≠‡∏á Wi-Fi</p>
      </div>
      <div class="card">
        <h3>BOT_TOKEN</h3>
        <p>Token ‡∏Ç‡∏≠‡∏á Telegram Bot ‡∏ó‡∏µ‡πà‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏à‡∏≤‡∏Å BotFather</p>
      </div>
      <div class="card">
        <h3>CHAT_ID</h3>
        <p>‡∏£‡∏´‡∏±‡∏™‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ‡∏´‡∏£‡∏∑‡∏≠‡∏Å‡∏•‡∏∏‡πà‡∏°‡∏ó‡∏µ‡πà‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡πÉ‡∏´‡πâ‡∏ö‡∏≠‡∏ó‡∏™‡πà‡∏á‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡πÑ‡∏õ‡πÅ‡∏à‡πâ‡∏á‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô</p>
      </div>
    </div>
  </section>

  <section id="generator">
    <div class="section-title">‚öôÔ∏è ESP8266 Code Generator</div>
    
    <p style="color:var(--muted); max-width:700px; margin-bottom:24px; line-height:1.8;">
      ‡∏Å‡∏£‡∏≠‡∏Å‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏Å‡∏≤‡∏£‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì‡∏î‡πâ‡∏≤‡∏ô‡∏•‡πà‡∏≤‡∏á ‡πÅ‡∏•‡πâ‡∏ß‡∏£‡∏∞‡∏ö‡∏ö‡∏à‡∏∞‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÇ‡∏Ñ‡πâ‡∏î ESP8266 ‡∏ó‡∏µ‡πà‡∏û‡∏£‡πâ‡∏≠‡∏°‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô‡πÉ‡∏´‡πâ‡∏≠‡∏±‡∏ï‡πÇ‡∏ô‡∏°‡∏±‡∏ï‡∏¥
    </p>

    <div class="form-grid">
      <div class="form-group">
        <label>üì° WiFi SSID</label>
        <input type="text" id="ssid" value="3bb_Q-pid_2.4G" placeholder="‡∏ä‡∏∑‡πà‡∏≠ WiFi">
      </div>
      <div class="form-group">
        <label>üîë WiFi Password</label>
        <input type="text" id="pass" value="0816034255" placeholder="‡∏£‡∏´‡∏±‡∏™‡∏ú‡πà‡∏≤‡∏ô WiFi">
      </div>
      <div class="form-group">
        <label>ü§ñ Bot Token</label>
        <input type="text" id="token" value="PUT_YOUR_BOT_TOKEN" placeholder="Token ‡∏à‡∏≤‡∏Å BotFather">
      </div>
      <div class="form-group">
        <label>üí¨ Chat ID</label>
        <input type="text" id="chatid" value="7109400069" placeholder="Chat ID">
      </div>
      <div class="form-group">
        <label>üìç IR Sensor PIN</label>
        <input type="text" id="ir" value="D5" placeholder="D5">
      </div>
      <div class="form-group">
        <label>üî¥ LED Red PIN</label>
        <input type="text" id="red" value="D1" placeholder="D1">
      </div>
      <div class="form-group">
        <label>üü¢ LED Green PIN</label>
        <input type="text" id="green" value="D2" placeholder="D2">
      </div>
      <div class="form-group">
        <label>‚è±Ô∏è IR Debounce (ms)</label>
        <input type="number" id="debounce" value="400" placeholder="400">
      </div>
      <div class="form-group">
        <label>‚è≥ Telegram Cooldown (ms)</label>
        <input type="number" id="cooldown" value="1200" placeholder="1200">
      </div>
      <div class="form-group">
        <label>üîÑ Telegram Interval (ms)</label>
        <input type="number" id="interval" value="900" placeholder="900">
      </div>
    </div>

    <div class="actions">
      <button class="btn" onclick="copyCode()">
        <svg width="16" height="16" fill="currentColor" viewBox="0 0 16 16">
          <path d="M4 1.5H3a2 2 0 0 0-2 2V14a2 2 0 0 0 2 2h10a2 2 0 0 0 2-2V3.5a2 2 0 0 0-2-2h-1v1h1a1 1 0 0 1 1 1V14a1 1 0 0 1-1 1H3a1 1 0 0 1-1-1V3.5a1 1 0 0 1 1-1h1v-1z"/>
          <path d="M9.5 1a.5.5 0 0 1 .5.5v1a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5v-1a.5.5 0 0 1 .5-.5h3zm-3-1A1.5 1.5 0 0 0 5 1.5v1A1.5 1.5 0 0 0 6.5 4h3A1.5 1.5 0 0 0 11 2.5v-1A1.5 1.5 0 0 0 9.5 0h-3z"/>
        </svg>
        Copy Full Code
      </button>
      <button class="btn btn-secondary" onclick="downloadCode()">
        <svg width="16" height="16" fill="currentColor" viewBox="0 0 16 16">
          <path d="M.5 9.9a.5.5 0 0 1 .5.5v2.5a1 1 0 0 0 1 1h12a1 1 0 0 0 1-1v-2.5a.5.5 0 0 1 1 0v2.5a2 2 0 0 1-2 2H2a2 2 0 0 1-2-2v-2.5a.5.5 0 0 1 .5-.5z"/>
          <path d="M7.646 11.854a.5.5 0 0 0 .708 0l3-3a.5.5 0 0 0-.708-.708L8.5 10.293V1.5a.5.5 0 0 0-1 0v8.793L5.354 8.146a.5.5 0 1 0-.708.708l3 3z"/>
        </svg>
        Download .ino
      </button>
    </div>

    <div class="code-output">
      <div class="copy-indicator" id="copyIndicator">‚úì Copied!</div>
      <pre id="code"></pre>
    </div>
  </section>

  <section id="flow">
    <div class="section-title">System Workflow</div>
    <div class="grid">
      <div class="card">
        <h3>1. ‡∏ï‡∏£‡∏ß‡∏à‡∏à‡∏±‡∏ö‡∏û‡∏±‡∏™‡∏î‡∏∏</h3>
        <p>‡πÄ‡∏ã‡∏ô‡πÄ‡∏ã‡∏≠‡∏£‡πå‡∏≠‡∏¥‡∏ô‡∏ü‡∏£‡∏≤‡πÄ‡∏£‡∏î‡∏ï‡∏£‡∏ß‡∏à‡∏à‡∏±‡∏ö‡∏ß‡πà‡∏≤‡∏°‡∏µ‡∏ß‡∏±‡∏ï‡∏ñ‡∏∏‡∏≠‡∏¢‡∏π‡πà‡∏†‡∏≤‡∏¢‡πÉ‡∏ô‡∏ä‡πà‡∏≠‡∏á‡∏£‡∏±‡∏ö‡∏û‡∏±‡∏™‡∏î‡∏∏‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà</p>
      </div>
      <div class="card">
        <h3>2. ‡∏õ‡∏£‡∏∞‡∏°‡∏ß‡∏•‡∏ú‡∏•</h3>
        <p>ESP8266 ‡∏õ‡∏£‡∏∞‡∏°‡∏ß‡∏•‡∏ú‡∏•‡∏Ñ‡πà‡∏≤‡∏™‡∏±‡∏ç‡∏ç‡∏≤‡∏ì‡∏à‡∏≤‡∏Å‡πÄ‡∏ã‡∏ô‡πÄ‡∏ã‡∏≠‡∏£‡πå‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏ï‡∏±‡∏î‡∏™‡∏¥‡∏ô‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞</p>
      </div>
      <div class="card">
        <h3>3. ‡πÅ‡∏à‡πâ‡∏á‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô</h3>
        <p>‡πÄ‡∏°‡∏∑‡πà‡∏≠‡∏û‡∏ö‡∏û‡∏±‡∏™‡∏î‡∏∏ ‡∏£‡∏∞‡∏ö‡∏ö‡∏à‡∏∞‡∏™‡πà‡∏á‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡πÅ‡∏à‡πâ‡∏á‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô‡πÑ‡∏õ‡∏¢‡∏±‡∏á Telegram ‡∏ó‡∏±‡∏ô‡∏ó‡∏µ</p>
      </div>
      <div class="card">
        <h3>4. ‡πÅ‡∏™‡∏î‡∏á‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞</h3>
        <p>‡πÑ‡∏ü LED ‡πÅ‡∏™‡∏î‡∏á‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞‡∏ß‡πà‡∏≤‡∏°‡∏µ‡∏û‡∏±‡∏™‡∏î‡∏∏‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏û‡∏±‡∏™‡∏î‡∏∏</p>
      </div>
    </div>
  </section>

</main>

<footer>
  Smart Parcel Locker with Telegram Notification System<br>
  Academic Project Presentation
</footer>

<script>
const ids = ["ssid","pass","token","chatid","ir","red","green","debounce","cooldown","interval"];
ids.forEach(id => document.getElementById(id).addEventListener("input", render));

function render() {
  const v = id => document.getElementById(id).value;

  const generatedCode = `#include <ESP8266WiFi.h>
#include <WiFiClientSecure.h>
#include <UniversalTelegramBot.h>

/* ================== CONFIG ================== */
#define WIFI_SSID     "${v("ssid")}"
#define WIFI_PASSWORD "${v("pass")}"

#define BOT_TOKEN "${v("token")}"
#define CHAT_ID  "${v("chatid")}"

#define IR_PIN     ${v("ir")}
#define LED_RED    ${v("red")}
#define LED_GREEN  ${v("green")}

/* ================== OBJECT ================== */
WiFiClientSecure client;
UniversalTelegramBot bot(BOT_TOKEN, client);

/* ================== STATE ================== */
volatile unsigned long irCount = 0;
volatile bool irPulse = false;

unsigned long lastTelegramSend = 0;
unsigned long lastTelegramCheck = 0;
unsigned long bootTime = 0;
long lastUpdateId = 0;

/* ===== IR DEBOUNCE ===== */
volatile unsigned long lastIRTime = 0;
const unsigned long IR_DEBOUNCE_MS = ${v("debounce")};

/* ================== TIMING ================== */
const unsigned long TG_SEND_COOLDOWN = ${v("cooldown")};
const unsigned long TG_INTERVAL      = ${v("interval")};
const unsigned long LED_BLINK_TIME   = 120;

/* ================== LED BLINK STATE ================== */
bool blinkActive = false;
unsigned long blinkStart = 0;

/* ================== INTERRUPT ================== */
ICACHE_RAM_ATTR void irISR() {
  unsigned long now = millis();
  if (now - lastIRTime < IR_DEBOUNCE_MS) return;
  lastIRTime = now;
  irCount++;
  irPulse = true;
}

/* ================== WIFI ================== */
void connectWiFi() {
  WiFi.mode(WIFI_STA);
  WiFi.begin(WIFI_SSID, WIFI_PASSWORD);
  unsigned long start = millis();
  while (WiFi.status() != WL_CONNECTED) {
    delay(300);
    if (millis() - start > 15000) ESP.restart();
  }
}

/* ================== SAFE SEND ================== */
bool safeSend(String text) {
  if (WiFi.status() != WL_CONNECTED) return false;
  client.stop();
  client.setInsecure();
  return bot.sendMessage(CHAT_ID, text, "");
}

/* ================== LED ================== */
void updateLED() {
  if (irCount > 0) {
    digitalWrite(LED_RED, HIGH);
    digitalWrite(LED_GREEN, LOW);
  } else {
    digitalWrite(LED_RED, LOW);
    digitalWrite(LED_GREEN, HIGH);
  }
}

void blinkRedAsync() {
  blinkActive = true;
  blinkStart = millis();
  digitalWrite(LED_RED, HIGH);
  digitalWrite(LED_GREEN, LOW);
}

void handleBlink() {
  if (!blinkActive) return;
  if (millis() - blinkStart >= LED_BLINK_TIME) {
    blinkActive = false;
    updateLED();
  }
}

/* ================== FORMAT ================== */
String uptime() {
  unsigned long s = (millis() - bootTime) / 1000;
  return String(s / 3600) + "h " + String((s % 3600) / 60) + "m " + String(s % 60) + "s";
}

/* ================== TEXT NORMALIZE ================== */
String norm(String t) {
  t.toLowerCase();
  t.replace("/", "");
  t.replace(" ", "");
  t.replace("\\n", "");
  t.replace("\\r", "");
  return t;
}

/* ================== SETUP ================== */
void setup() {
  Serial.begin(115200);
  pinMode(IR_PIN, INPUT_PULLUP);
  pinMode(LED_RED, OUTPUT);
  pinMode(LED_GREEN, OUTPUT);

  bootTime = millis();
  updateLED();

  connectWiFi();
  client.setInsecure();

  attachInterrupt(digitalPinToInterrupt(IR_PIN), irISR, FALLING);

  int n = bot.getUpdates(0);
  if (n > 0) lastUpdateId = bot.messages[n - 1].update_id;

  safeSend("ü§ñ ‡∏£‡∏∞‡∏ö‡∏ö‡∏≠‡∏≠‡∏ô‡πÑ‡∏•‡∏ô‡πå‡πÅ‡∏•‡πâ‡∏ß\\n‡∏û‡∏¥‡∏°‡∏û‡πå: ‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞ / ‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏û‡∏±‡∏™‡∏î‡∏∏ / ‡∏£‡∏µ‡πÄ‡∏ã‡πá‡∏ï / help");
}

/* ================== IR PROCESS ================== */
void processIR() {
  if (!irPulse) return;

  blinkRedAsync();

  if (millis() - lastTelegramSend > TG_SEND_COOLDOWN) {
    safeSend("üì¶ ‡∏ï‡∏£‡∏ß‡∏à‡∏û‡∏ö‡∏û‡∏±‡∏™‡∏î‡∏∏\\n‡∏£‡∏ß‡∏°‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î: " + String(irCount));
    lastTelegramSend = millis();
  }

  irPulse = false;
}

/* ================== TELEGRAM ================== */
void handleTelegram() {
  if (millis() - lastTelegramCheck < TG_INTERVAL) return;
  lastTelegramCheck = millis();

  if (WiFi.status() != WL_CONNECTED) {
    connectWiFi();
    return;
  }

  int n = bot.getUpdates(lastUpdateId + 1);
  for (int i = 0; i < n; i++) {

    lastUpdateId = bot.messages[i].update_id;
    String raw = bot.messages[i].text;
    String t = norm(raw);

    if (t.indexOf("help") >= 0 || t.indexOf("‡∏ä‡πà‡∏ß‡∏¢") >= 0) {
      safeSend("‡∏Ñ‡∏≥‡∏™‡∏±‡πà‡∏á:\\n‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞\\n‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏û‡∏±‡∏™‡∏î‡∏∏\\n‡∏£‡∏µ‡πÄ‡∏ã‡πá‡∏ï\\nhelp");

    } else if (t.indexOf("status") >= 0 || t.indexOf("‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞") >= 0) {
      String msg = "üì° STATUS\\n";
      msg += "RSSI: " + String(WiFi.RSSI()) + " dBm\\n";
      msg += "IP: " + WiFi.localIP().toString() + "\\n";
      msg += "Count: " + String(irCount) + "\\n";
      msg += "Uptime: " + uptime();
      safeSend(msg);

    } else if (t.indexOf("‡∏à‡∏≥‡∏ô‡∏ß‡∏ô") >= 0 || t.indexOf("‡∏û‡∏±‡∏™‡∏î‡∏∏") >= 0) {
      safeSend("üìä ‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏û‡∏±‡∏™‡∏î‡∏∏: " + String(irCount));

    } else if (t.indexOf("‡∏£‡∏µ‡πÄ‡∏ã‡πá‡∏ï") >= 0 || t.indexOf("‡∏•‡πâ‡∏≤‡∏á") >= 0) {
      irCount = 0;
      updateLED();
      safeSend("‚ôªÔ∏è ‡∏£‡∏µ‡πÄ‡∏ã‡πá‡∏ï‡∏ï‡∏±‡∏ß‡∏ô‡∏±‡∏ö‡πÅ‡∏•‡πâ‡∏ß");

    } else {
      safeSend("‡∏û‡∏¥‡∏°‡∏û‡πå‡πÑ‡∏°‡πà‡∏ï‡∏£‡∏á ‡∏•‡∏≠‡∏á: ‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞ / ‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏û‡∏±‡∏™‡∏î‡∏∏ / ‡∏£‡∏µ‡πÄ‡∏ã‡πá‡∏ï / help");
    }
  }
}

/* ================== LOOP ================== */
void loop() {
  processIR();
  handleTelegram();
  handleBlink();
}`;

  document.getElementById("code").innerText = generatedCode;
}

function copyCode() {
  const code = document.getElementById("code").innerText;
  navigator.clipboard.writeText(code).then(() => {
    const indicator = document.getElementById("copyIndicator");
    indicator.classList.add("show");
    setTimeout(() => indicator.classList.remove("show"), 2000);
  });
}

function downloadCode() {
  const code = document.getElementById("code").innerText;
  const blob = new Blob([code], { type: 'text/plain' });
  const url = URL.createObjectURL(blob);
  const a = document.createElement('a');
  a.href = url;
  a.download = 'smart_parcel_locker.ino';
  a.click();
  URL.revokeObjectURL(url);
}

// Smooth scroll
document.querySelectorAll('a[href^="#"]').forEach(anchor => {
  anchor.addEventListener('click', function (e) {
    e.preventDefault();
    const target = document.querySelector(this.getAttribute('href'));
    if (target) {
      target.scrollIntoView({ behavior: 'smooth', block: 'start' });
    }
  });
});

// Initialize
render();
</script>

</body>

</html>
